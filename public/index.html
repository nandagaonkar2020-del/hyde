<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HYDE | Premium Leather</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link href="./stylee.css" rel="stylesheet" />
    <link href="./button.css" rel="stylesheet" />
    <style>
      .dropdown-item.active, .dropdown-item:active {
    color: var(--bs-dropdown-link-active-color);
    text-decoration: none;
    background-color: #4d5154;
}
      /* Reuse product styles from shop page */
      body {
        font-family: "Montserrat", sans-serif;
        background: #0b0b0b;
        color: #fff;
        overflow-x: hidden;
      }

      .nav-tabs {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        border: none;
        background: #121212;
        border-radius: 12px;
        padding: 6px;
        margin-top: 20px;
        margin-bottom: 2rem;
      }
      .nav-tabs .nav-link {
        color: #a0a0a0;
        background: transparent;
        border: none;
        padding: 8px 16px;
        font-weight: 500;
        border-radius: 8px;
        margin: 4px;
        transition: all 0.3s ease;
      }
      .nav-tabs .nav-link:hover {
        color: #fff;
        background: rgba(255, 255, 255, 0.06);
      }
      .nav-tabs .nav-link.active {
        color: #fff;
        background: rgba(255, 255, 255, 0.12);
        font-weight: 600;
      }

      .product-card {
        background: #141414;
        border-radius: 14px;
        padding: 16px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .product-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 18px rgba(255, 255, 255, 0.07);
      }
      .product-card img {
        width: 100%;
        height: 250px;
        object-fit: contain;
        border-radius: 4px;
        margin-bottom: 12px;
        transition: transform 0.3s ease;
      }
      .product-card:hover img {
        transform: scale(1.02);
      }
      .product-card h6 {
        font-weight: 600;
        color: #f2f2f2;
        text-transform: uppercase;
        margin-bottom: 6px;
      }
      .product-card p {
        font-size: 0.9rem;
        color: #999;
        margin-bottom: 12px;
        min-height: 38px;
      }
      .price-container {
        margin-top: auto;
        margin-bottom: 10px;
      }
      .price-container del {
        color: #666;
        margin-right: 6px;
      }
      .current-price {
        color: #fff;
        font-weight: 600;
        font-size: 1.1rem;
      }
      .btn-cart {
        background: #1a1a1a;
        color: #fff;
        border: 1px solid #333;
        border-radius: 30px;
        font-weight: 500;
        padding: 8px 16px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }
      .btn-cart:hover {
        background: #222;
        border-color: #555;
      }

      footer {
        text-align: center;
        padding: 20px;
        background: #0d0d0d;
        color: #bbb;
        font-size: 0.9rem;
      }
      footer a {
        color: #999;
        text-decoration: none;
        margin: 0 5px;
      }
      .product-card {
  border: 1px solid #141414;
  border-radius: 10px;
  padding: 12px;
  text-align: center;
  transition: all 0.3s ease;
  background: #141414;
  cursor: pointer;
}
.product-card:hover {
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  transform: translateY(-3px);
}
.product-card img {
  width: 100%;
  height: 220px;
  object-fit: cover;
  border-radius: 4px;
}
.product-card h6 {
  margin-top: 10px;
  font-weight: 600;
}
.price-container {
  margin-top: 8px;
}
.price-container del {
  color: #999;
  margin-right: 6px;
}
.current-price {
  font-weight: 700;
  color: #ffffff;
}
.btn-cart {
  margin-top: 8px;
  border-radius: 20px;
  background-color: #000;
  color: #fff;
}
.btn-cart:hover {
  background-color: #333;
}
.pagination .page-link {
  color: #000;
}
.pagination .active .page-link {
  background-color: #000;
  border-color: #000;
  color: #fff;
}

.pagination .page-link {
    color: #000;
    background-color: #404040;
    border: #404040;
}
    </style>
  </head>
  <body style="overflow-x: hidden">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
      <div
        class="container-fluid d-flex align-items-center justify-content-between px-3"
      >
        <!-- Left: Nav links (collapsible) -->
        <button
          class="navbar-toggler order-1"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <i class="bi bi-list text-white fs-3"></i>
        </button>
        <div
          class="collapse navbar-collapse justify-content-start order-lg-1 order-3"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="shop.html">Shop</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./customization.html">Customize</a>
            </li>
          </ul>
        </div>
        <!-- Center: Logo -->
        <!-- <a class="navbar-brand mx-auto order-2" href="#">HYDE</a> -->
        <a class="navbar-brand mx-auto order-2" href="#"
          ><img
            src="./img/logo.png"
            alt=""
            class="img-fluid"
            style="height: 80px"
        /></a>
        <!-- Right: Icons -->
        <div class="icons d-flex align-items-center order-lg-3 order-4">
          <a href="cart.html" class="text-white me-3 position-relative">
            <i class="bi bi-cart fs-5"></i>
            <span
              id="cartBadge"
              class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"
              style="display: none; width: 10px; height: 10px"
            ></span>
          </a>
          <!-- <a href="#" class="text-white"><i class="bi bi-person-circle fs-5"></i></a> -->
        </div>
      </div>
    </nav>
    <!-- âœ… New Hero Section -->
    <section class="hero-banner d-flex align-items-center">
      <img src="./img/dummy.png" alt="Leather Jacket" />
      <div class="hero-text" data-aos="fade-right" data-aos-duration="1000">
        <h2>Luxury Meets Strength</h2>
        <p>Premium Leather Jackets â€¢ Wallets â€¢ Belts</p>
        <a href="shop.html" class="glass-btn">Shop Now</a>
        <!-- Button -->
        <!-- <a href="shop.html"> <div class="button-wrap"> <button> <span>Generate</span> </button> <div class="button-shadow"></div> </div> </a> -->
        <!-- Background -->
        <!-- <svg style="position: absolute; width: 100%; height: 100%; z-index: 0;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg"> <defs> <pattern id="dottedGrid" width="30" height="30" patternUnits="userSpaceOnUse"> <circle cx="2" cy="2" r="1" fill="rgba(0,0,0,0.15)" /> </pattern> </defs> <rect width="100%" height="100%" fill="url(#dottedGrid)" /> </svg> -->
      </div>
    </section>
    <!-- âš¡ Creative 3D Product + Text Section -->
    <section
      class="py-5"
      style="background: linear-gradient(135deg, #0d0d0d, #1c1c1c); color: #fff"
    >
      <div class="container">
        <div class="row align-items-center">
          <!-- ðŸ§¥ 3D Model -->
          <div
            class="col-lg-6 text-center mb-4 mb-lg-0"
            data-aos="fade-right"
            data-aos-duration="1000"
          >
            <model-viewer
              src="https://res.cloudinary.com/dqh0k1ymf/image/upload/v1762094330/Cloudinary%203D/models/product-v1_wcfq1n.glb"
              alt="3D Leather Jacket"
              auto-rotate
              camera-controls
              ar
              ar-modes="webxr scene-viewer quick-look"
              style="
                width: 100%;
                height: 450px;
                border-radius: 15px;
                background: radial-gradient(
                  circle at center,
                  #000,
                  #1a1a1a,
                  #000
                );
                box-shadow: 0 0 30px rgba(255, 255, 255, 0.05);
              "
            >
            </model-viewer>
          </div>
          <!-- âœ¨ Text Content -->
          <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000">
            <h2
              class="fw-bold mb-3"
              style="font-size: 2.5rem; letter-spacing: 1px"
            >
              Luxury Meets Strength
            </h2>
            <p
              class="text-light mb-4"
              style="font-size: 1.1rem; color: #d6d6d6 !important"
            >
              Experience the perfect blend of craftsmanship and durability. Our
              premium <strong>leather jackets</strong>,
              <strong>wallets</strong>, and <strong>belts</strong> are designed
              for those who value timeless style and rugged confidence.
            </p>
            <ul class="list-unstyled mb-4">
              <li class="mb-2">
                <i class="bi bi-check-circle-fill text-white me-2"></i> 100%
                Genuine Leather
              </li>
              <li class="mb-2">
                <i class="bi bi-check-circle-fill text-white me-2"></i>
                Handcrafted Detailing
              </li>
              <li class="mb-2">
                <i class="bi bi-check-circle-fill text-white me-2"></i> Lifetime
                Durability
              </li>
            </ul>
            <a
              href="customization.html"
              class="glass-btn px-4 py-2 fw-semibold rounded-pill shadow-sm"
            >
              Customize
            </a>
          </div>
        </div>
      </div>
    </section>
    <!-- ðŸ’Ž Featured Products Section -->
    <div
      class="container-fluid"
      style="background: linear-gradient(135deg, #0d0d0d, #1c1c1c)"
    >
      <div class="container" style="padding: 2rem 0">
        <h2 class="fw-bold text-white text-center mb-5">Featured Products</h2>
        <!-- Hero Image Section -->
        <div class="row justify-content-center align-items-center mb-4">
          <div class="col-12">
            <a href="shop.html" class="text-decoration-none">
              <div
                class="position-relative overflow-hidden rounded"
                style="
                  height: 40vh;
                  background-image: url('./img/f11.webp');
                  background-size: cover;
                  background-position: right;
                "
              >
                <div
                  class="position-absolute p-3 text-white"
                  style="left: 3%; bottom: 20%"
                >
                  <h2
                    class="mb-1"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Premium Leather
                  </h2>
                  <p
                    class="mb-0 small"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Custom Jackets
                  </p>
                </div>
              </div>
            </a>
          </div>
        </div>
        <!-- Two Product Images Row -->
        <div class="row justify-content-center align-items-center mb-4">
          <div class="col-lg-6 col-md-6 mb-3">
            <a href="shop.html" class="text-decoration-none">
              <div
                class="position-relative overflow-hidden rounded"
                style="
                  height: 30vh;
                  background-image: url('./img/f2.webp');
                  background-size: cover;
                  background-position: right;
                "
              >
                <div
                  class="position-absolute p-3 text-white"
                  style="left: 3%; top: 10%"
                >
                  <h5
                    class="mb-1"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Premium Leather
                  </h5>
                  <p
                    class="mb-0 small"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Wallets
                  </p>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-6 mb-3">
            <a href="shop.html" class="text-decoration-none">
              <div
                class="position-relative overflow-hidden rounded"
                style="
                  height: 30vh;
                  background-image: url('./img/f3.webp');
                  background-size: cover;
                  background-position: right;
                "
              >
                <div
                  class="position-absolute p-3 text-white"
                  style="left: 3%; bottom: 10%"
                >
                  <h5
                    class="mb-1"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Premium Leather
                  </h5>
                  <p
                    class="mb-0 small"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8)"
                  >
                    Belts
                  </p>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- ðŸ’Ž Featured Products Section -->
    <div
      class="container-fluid"
      style="
            background: linear-gradient(to right, #141414, #1c1c1c);
        padding: 2rem 0;
      "
    >
      <div class="container text-white">
        <h2 class="fw-bold text-center mb-5">Products</h2>
        <div id="indexShopSection">
          <div class="text-center text-white">Loading products...</div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p>Â© 2025 HYDE. All Rights Reserved.</p>
      <div>
        <a href="#">Privacy Policy</a> | <a href="#">Terms & Conditions</a> |
        <a href="#">Support</a>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./cart-badge.js"></script>
    <script src="/common.js"></script>
<script>
AOS.init();

function generateSlug(title) {
  return title.toLowerCase().replace(/[^\w ]+/g, "").replace(/ +/g, "-");
}

function navigateToProductDetail(productId, productTitle) {
  window.location.href =
    "/product-detail.html?id=" +
    encodeURIComponent(productId) +
    "&title=" +
    encodeURIComponent(productTitle || "");
}

function addToCart(productId, event) {
  if (event) event.stopPropagation();
  const allProducts = window.loadedProducts || [];
  const product = allProducts.find((p) => p._id === productId || p.id === productId);
  if (!product) return alert("Product not found");
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find((item) => item.productId === productId);
  if (existing) existing.quantity += 1;
  else
    cart.push({
      productId,
      title: product.title,
      price: product.offerPrice || product.actualPrice,
      image: (product.images && product.images[0]) || "/placeholder.png",
      quantity: 1,
    });
  localStorage.setItem("cart", JSON.stringify(cart));
  window.location.href = "/cart.html";
}

async function loadIndexProducts() {
  try {
    const products = await publicApiGet("/products/public");
    window.loadedProducts = Array.isArray(products) ? products : [];

    if (!products.length) {
      document.getElementById("indexShopSection").innerHTML =
        '<div class="text-center text-white py-4">No products found.</div>';
      return;
    }

    const categories = [...new Set(products.map(p => p.category || "Uncategorized"))];
    let currentCategory = "";
    let currentPage = 1;
    const itemsPerPage = 16;

    // Filter dropdown + grid + pagination container
    document.getElementById("indexShopSection").innerHTML = `
      <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
        <div class="dropdown">
          <button class="btn btn-dark dropdown-toggle" type="button" id="categoryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Filter by Category
          </button>
          <ul class="dropdown-menu" aria-labelledby="categoryDropdown">
            <li><a class="dropdown-item active" href="#" data-category="">All</a></li>
            ${categories.map(c => `<li><a class="dropdown-item" href="#" data-category="${c}">${c}</a></li>`).join("")}
          </ul>
        </div>
        <div id="productCount" class="text-white small"></div>
      </div>
      <div class="row g-4" id="productGrid"></div>
      <div class="d-flex justify-content-center mt-4" id="pagination"></div>
    `;

    const grid = document.getElementById("productGrid");
    const pagination = document.getElementById("pagination");
    const countDisplay = document.getElementById("productCount");

    function renderProducts(list) {
      grid.innerHTML = "";
      if (!list.length) {
        grid.innerHTML = `<div class="text-center text-muted py-4">No products found in this category.</div>`;
        countDisplay.textContent = "";
        pagination.innerHTML = "";
        return;
      }

      const totalPages = Math.ceil(list.length / itemsPerPage);
      if (currentPage > totalPages) currentPage = totalPages;

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const visible = list.slice(start, end);

      visible.forEach(p => {
        const productId = p._id || p.id;
        const productTitle = p.title || "Untitled Product";
        const desc = p.description || "";
        const img = (p.images && p.images[0]) || p.imageUrl || "/placeholder.png";
        const actual = p.actualPrice ?? 0;
        const offer = p.offerPrice ?? actual;
        const safeTitle = (productTitle + "")
          .replace(/'/g, "\\'")
          .replace(/"/g, "&quot;");

        const html = `
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="product-card" onclick="navigateToProductDetail('${encodeURIComponent(productId)}', '${safeTitle}')">
              <img src="${img}" alt="${safeTitle}" onerror="this.src='/placeholder.png'">
              <h6>${productTitle}</h6>
              <p>${desc.substring(0, 100)}${desc.length > 100 ? "..." : ""}</p>
              <div class="price-container">
                ${actual && actual > offer ? `<del>â‚¹${actual}</del>` : ""}
                <span class="current-price">â‚¹${offer}</span>
              </div>
              <button class="btn btn-cart btn-sm" onclick="addToCart('${encodeURIComponent(productId)}', event)">
                <i class="bi bi-cart"></i> Add to Cart
              </button>
            </div>
          </div>
        `;
        grid.insertAdjacentHTML("beforeend", html);
      });

      countDisplay.textContent = `Showing ${start + 1}â€“${Math.min(end, list.length)} of ${list.length} products`;

      // Pagination controls
      pagination.innerHTML = `
        <nav>
          <ul class="pagination">
            <li class="page-item ${currentPage === 1 ? "disabled" : ""}">
              <a class="page-link" href="#" id="prevPage">Previous</a>
            </li>
            ${Array.from({ length: totalPages }, (_, i) => `
              <li class="page-item ${i + 1 === currentPage ? "active" : ""}">
                <a class="page-link page-number" href="#" data-page="${i + 1}">${i + 1}</a>
              </li>`).join("")}
            <li class="page-item ${currentPage === totalPages ? "disabled" : ""}">
              <a class="page-link" href="#" id="nextPage">Next</a>
            </li>
          </ul>
        </nav>
      `;

      // Pagination click logic
      document.querySelectorAll(".page-number").forEach(btn => {
        btn.addEventListener("click", e => {
          e.preventDefault();
          currentPage = +btn.getAttribute("data-page");
          renderProducts(filteredProducts());
        });
      });

      document.getElementById("prevPage")?.addEventListener("click", e => {
        e.preventDefault();
        if (currentPage > 1) {
          currentPage--;
          renderProducts(filteredProducts());
        }
      });
      document.getElementById("nextPage")?.addEventListener("click", e => {
        e.preventDefault();
        const totalPages = Math.ceil(list.length / itemsPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          renderProducts(filteredProducts());
        }
      });
    }

    function filteredProducts() {
      if (!currentCategory) return products;
      return products.filter(p => p.category === currentCategory);
    }

    // Handle dropdown click
    document.querySelectorAll(".dropdown-item").forEach(item => {
      item.addEventListener("click", (e) => {
        e.preventDefault();
        document.querySelectorAll(".dropdown-item").forEach(i => i.classList.remove("active"));
        item.classList.add("active");
        currentCategory = item.getAttribute("data-category");
        document.getElementById("categoryDropdown").textContent = currentCategory || "All Categories";
        currentPage = 1;
        renderProducts(filteredProducts());
      });
    });

    // Initial render
    renderProducts(products);

  } catch (err) {
    console.error("Error loading products:", err);
    document.getElementById("indexShopSection").innerHTML =
      `<div class="alert alert-danger">Error loading products</div>`;
  }
}

document.addEventListener("DOMContentLoaded", loadIndexProducts);
</script>



  </body>
</html>
